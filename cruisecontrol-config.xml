<cruisecontrol>

    <project name="innomatic" buildafterfailed="false">

        <plugin name="svn" classname="net.sourceforge.cruisecontrol.sourcecontrols.SVN" />

        <modificationset quietperiod="60">
            <svn localWorkingCopy="projects/${project.name}/" />
        </modificationset>

        <schedule interval="120">
            <ant anthome="apache-ant-1.7.0" buildfile="projects/${project.name}/build.xml" />
        </schedule>

        <bootstrappers>
            <svnbootstrapper localWorkingCopy="projects/${project.name}/"
                file="build.xml" />
        </bootstrappers>

        <listeners>
            <currentbuildstatuslistener file="logs/${project.name}/status.txt" />
        </listeners>

        <log dir="logs/${project.name}">
            <merge dir="projects/${project.name}/build/logs/" />
        </log>

        <publishers>
            <artifactspublisher dir="projects/${project.name}/build/api"
                dest="artifacts/${project.name}" subdirectory="api" />
            <artifactspublisher dir="projects/${project.name}/build/packages"
                dest="artifacts/${project.name}" subdirectory="packages" />
            <execute
                command="/opt/phpUnderControl/bin/phpuc.php graph logs/${project.name} artifacts/${project.name}" />
            <email mailhost="localhost" returnaddress="sysadmin@innoteam.it"
                returnname="Innomatic Build Status" spamwhilebroken="true"
                skipusers="true"
                buildresultsurl="http://cruise.innoteam.it/cruisecontrol/buildresults/innomatic">
                <always address="alex.pagnoni@innoteam.it" />
                <failure address="alex.pagnoni@innoteam.it" reportWhenFixed="true" />
                <!--failure address="yourboss@your.company" reportWhenFixed="true"/-->
            </email>
        </publishers>

    </project>
    
</cruisecontrol>
